%head
  - if ::Rails.env.downcase != 'production'
    %title="#{controller.controller_name.capitalize} - #{controller.action_name}"
    %h2= ::Rails.env.downcase.capitalize
  = stylesheet_link_tag 'default.scss.css'
  = stylesheet_link_tag 'main.css'
  = stylesheet_link_tag 'jquery-ui-1.8.22.custom.css'

  = javascript_include_tag "application"
  -#if action_name =~ /new|edit/ # TODO Did this due a js conflict not yet resolved mdd
  %script
    $(function() {
    $( "#datepicker" ).datepicker();
    });
    $(function() {
    var dateInput = $("#datepicker");
    var format = 'yy-mm-dd';
    dateInput.datepicker({dateFormat: format});
    dateInput.datepicker('setDate', $.datepicker.parseDate(format, dateInput.val()));
    });
  = csrf_meta_tag
  = favicon_link_tag 'favicon.ico'
%body
  #banner
    %h1= link_to 'Linker', root_path
  #columns
    #side
      .alink= link_to 'Links', links_path
      - if session[:user_id]
        .alink= link_to 'New Link', new_link_path
      .alink= link_to 'Groups', groups_path
      - if session[:user_id]
        .alink= link_to 'New Group', new_group_path
        .alink= link_to 'Admin', users_path
        - if session[:username]
          .alink= link_to 'Logout', :controller => :ladmin, :action => 'logout'
          %span#username_display
            .alink= session[:username]
      - else
        .alink= link_to 'Login', :controller => :ladmin, :action => 'login'
    #main
      - if flash[:notice]
        %span#notice
          = flash[:notice]
        %br
      - [@group,@link].compact.each do |model|
        - if model.errors.any?
          %span.errorExplanation
            %ul
              - model.errors.full_messages.each do |msg|
                %li
                  =msg
        - else
          %br
          %br
      = yield :layout

/ Links:
%span#main
  - tbl_width = session[:full_details] == "true" ? 1200 : 700
  %table{:width => tbl_width}
    %tr
      %td{:colspan => "6"}
        .nav_links
          = render :partial => 'links'
          = render :partial => 'search'
    %tr
      %td{:colspan => "5"} &nbsp;
    %tr
      %th Group
      %th URL
      %th Ver.
      %th Added
      %th &nbsp;Verified&nbsp;
      %th Alt Text
      %th &nbsp;
    - row_bg_color_group = 'row_color_group_1'
    - current_group = ''
    - @links.each_with_index do |link, index|
      - construct_hyperlink(link.url_address, link.alt_text)
      - if link.group.group_name != (current_group ||= '')
        - display_group = current_group = link.group.group_name
        - row_bg_color_group = rotate_rows_color_group
      - else
        - display_group = ''
      %tr{:class => "#{row_bg_color_group}"}
        %td
          = link_to display_group, link.group, {"title" => link.group.group_description}
        %td
          %span#mainLink
            = sanitize @address_url
        %td= link.version_number
        %td.column_align
          - if link.content_date
            = session[:full_details] == 'true' ? long_form(link.content_date) : short_form(link.content_date)
        %td.column_align
          %span{:id => "verify_link_#{index}"}
            - if link.verified_date
              - link_text = session[:full_details] == 'true' ? long_form(link.verified_date) : short_form(link.verified_date)
              = link_to link_text, unverify_link_path(:id => link.id, :table_row => index), class: 'verify', title: 'UNverify link', remote:true
            - else
              = link_to 'verify', verify_link_path(:id => link.id, :table_row => index),  class: 'verify', title: 'Verify this link', remote: true
        %td= h @new_link_alt_text
        %td
          = link_to 'Details', link, {"title" => link.alt_text}, title: 'Link details'
%br/
%span.mainLinks= render :partial => 'links'
%br/
%br/
= "Total Links = #{@links.count}"
%br/
%br/

